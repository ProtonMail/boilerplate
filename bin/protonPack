#!/usr/bin/env node

const fs = require('fs');
const path = require('path');
const argv = require('minimist')(process.argv.slice(2));

const CONFIG = require('../cli/config');
const initBasicProtonApp = require('../cli/initBasicProtonApp');
const { getPort } = require('../webpack/helpers/source');

const isInit = argv.init;
const isDevServer = argv._.includes('dev-server');

if (isDevServer) {
    const server = require('../cli/server');
    const run = server(CONFIG);
    const port = getPort();
    console.log('[protonPack@server] listen on port:', port);
    run.listen(port);
}

isInit && initBasicProtonApp();
